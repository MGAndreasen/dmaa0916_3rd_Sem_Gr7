@model Booking.Web.Models.BookingViewModel

<div class="booking_partial someShadow">
    <div class="badget someShadow">2</div>

    @{
        if (Model.FromDestination > 0 && Model.ToDestination > 0)
        {
            if (Model.OneWay)
            {
                <h2>Departure date</h2>
            }
            else
            {
                <h2>Departure / Return dates</h2>
            }


            
                <fieldset id="TravelType" class="ny">
                    
                    @if (Model.OneWay)
                    {
                        @Html.Label("Return", new { @for = "OneWay-1" })
                        @Html.RadioButtonFor(x => x.OneWay, false, new { @class = "ny", @id = "OneWay-1" })
                        @Html.Label("One-Way", new { @for = "OneWay-2" })
                        @Html.RadioButtonFor(x => x.OneWay, true, new { @class = "ny", @id = "OneWay-2", @checked = "checked" })
                    }
                    else
                    {
                        @Html.Label("Return", new { @for = "OneWay-1" })
                        @Html.RadioButtonFor(x => x.OneWay, false, new { @class = "ny", @id = "OneWay-1", @checked = "checked" })
                        @Html.Label("One-Way", new { @for = "OneWay-2" })
                        @Html.RadioButtonFor(x => x.OneWay, true, new { @class = "ny", @id = "OneWay-2" })
                    }

                    
                </fieldset>

                @Html.Label("Departure Date:", new { @class = "ny" })
                @Html.TextBoxFor(x => x.OneWayDate, new { @class = "ny" })

                @Html.Label("Return Date:", new { @class = "ny", @id="lblReturnDate", @style = "display: none;" })
                @Html.TextBoxFor(x => x.ReturnDate, new { @class = "ny", @style = "display: none;" })
            

            <script>
                $(document).ready(function () {
                    $(function () {
                        $("#OneWayDate").attr("readonly", "readonly");
                        $("#ReturnDate").attr("readonly", "readonly");
                        $("#OneWayDate").datepicker();
                        $("#ReturnDate").datepicker();

                        $("OneWay").checkboxradio();
                        $("#TravelType").controlgroup();

                        if ($('input[name=OneWay]:checked').val() == "False")
                        {
                            $("#ReturnDate, #lblReturnDate").show();
                        }

                        $("OneWay").checkboxradio("refresh");

                        $("#OneWay-1, #OneWay-2").change(function () {
                            if ($('input[name=OneWay]:checked').val() == "True") {
                                $("#ReturnDate, #lblReturnDate").hide();
                            }
                            else
                            {
                                $("#ReturnDate, #lblReturnDate").show();
                            }

                            $(this).closest("form").submit();
                        });

                        $("#ReturnDate, #OneWayDate").change(function () {
                            $(this).closest("form").submit();
                        });
                        
                    });
                });
            </script>

        }

    }
</div>